
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Answers 1.4 - LLMOps. Make AI Work For You.</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#answers-14" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LLMOps. Make AI Work For You." class="md-header__button md-logo" aria-label="LLMOps. Make AI Work For You." data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LLMOps. Make AI Work For You.
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Answers 1.4
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ru/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/boramorka/LLM-book" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    boramorka/LLM-book
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LLMOps. Make AI Work For You." class="md-nav__button md-logo" aria-label="LLMOps. Make AI Work For You." data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    LLMOps. Make AI Work For You.
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/boramorka/LLM-book" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    boramorka/LLM-book
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="answers-14">Answers 1.4</h1>
<h2 id="theory">Theory</h2>
<ol>
<li>Chain of Thought Reasoning is a method that breaks down the problem-solving process into a sequence of logical steps, enhancing AI models' ability to navigate complex queries with greater precision. It boosts accuracy and demystifies the model's decision-making process.</li>
<li>The transparency of Chain of Thought Reasoning allows users to follow the AI's thought process behind its conclusions, similar to understanding a human expert's reasoning. This clarity and openness are key to building user trust in AI systems.</li>
<li>In educational tools, Chain of Thought Reasoning simulates the thought process of an expert tutor, guiding students through problems step by step. This approach encourages active learning, fosters deeper comprehension, and enhances critical thinking skills.</li>
<li>For customer service bots, Chain of Thought Reasoning improves understanding of complex queries and navigates a logical series of steps to provide accurate responses. This enhances customer satisfaction and efficiency by reducing the need for human intervention.</li>
<li>The Inner Monologue Technique involves the AI processing and considering steps internally without exposing the entire process to the user, showing only the final output or relevant aspects of the reasoning. This contrasts with Chain of Thought Reasoning by focusing on selective information presentation.</li>
<li>In sensitive information filtering, the Inner Monologue Technique ensures that AI models display only appropriate content by processing data internally. This protects user privacy and maintains information integrity.</li>
<li>For guided learning applications, the Inner Monologue Technique allows AI systems to provide hints or partial reasoning steps without revealing full solutions, challenging students and promoting deep engagement with material for a stronger understanding.</li>
<li>Setting up the environment involves loading the OpenAI API key and importing necessary Python libraries, preparing for executing reasoning tasks with AI models.</li>
<li>The <code>get_response_for_queries</code> function sends queries to the OpenAI API and retrieves model responses, encapsulating the logic for interacting with AI models based on structured prompts.</li>
<li>Chain-of-Thought prompting guides the AI model through a structured reasoning process, useful for complex queries where direct answers are not apparent, by outlining systematic steps for the model to follow.</li>
<li>In customer service, structuring system and user prompts guides AI models through reasoning processes to provide detailed product information, ensuring accurate and relevant responses to customer inquiries.</li>
<li>Extracting and presenting the final response in the Inner Monologue implementation involves selecting only the essential conclusion of the AI's processing, enhancing the user interface by providing clear and concise answers without overwhelming details.</li>
</ol>
<h2 id="practice">Practice</h2>
<p>1.
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">chain_of_thought_prompting</span><span class="p">(</span><span class="n">user_query</span><span class="p">):</span>
    <span class="c1"># Define a delimiter for separating reasoning steps</span>
    <span class="n">step_delimiter</span> <span class="o">=</span> <span class="s2">&quot;####&quot;</span>

    <span class="c1"># System prompt guiding the model through the reasoning process</span>
    <span class="n">system_prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Follow these steps to answer customer queries, using &#39;</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2">&#39; to delineate each step.</span>

<span class="s2">Step 1:</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2"> Determine if the query pertains to a specific product rather than a general category.</span>

<span class="s2">Step 2:</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2"> Identify if the product is among the listed items, including details such as brand, features, and price.</span>

<span class="s2">[Provide a list of products here]</span>

<span class="s2">Step 3:</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2"> Assess any assumptions made by the customer regarding product comparisons or specifications.</span>

<span class="s2">Step 4:</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2"> Verify the accuracy of these assumptions based on provided product information.</span>

<span class="s2">Step 5:</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2"> Correct any misconceptions, referencing only the listed products, and respond in a courteous manner.</span>
<span class="s2">&quot;&quot;&quot;</span>

    <span class="c1"># Structuring the user query to fit the prompt format</span>
    <span class="n">structured_user_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">step_delimiter</span><span class="si">}{</span><span class="n">user_query</span><span class="si">}{</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c1"># Return the system prompt and the structured user query</span>
    <span class="k">return</span> <span class="n">system_prompt</span><span class="p">,</span> <span class="n">structured_user_query</span>

<span class="c1"># Example usage</span>
<span class="n">user_query</span> <span class="o">=</span> <span class="s2">&quot;How does the BlueWave Chromebook compare to the TechPro Desktop in terms of cost?&quot;</span>
<span class="n">system_prompt</span><span class="p">,</span> <span class="n">structured_user_query</span> <span class="o">=</span> <span class="n">chain_of_thought_prompting</span><span class="p">(</span><span class="n">user_query</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;System Prompt:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">system_prompt</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Structured User Query:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">structured_user_query</span><span class="p">)</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_final_response</span><span class="p">(</span><span class="n">model_output</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts only the final response from the model&#39;s output.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - model_output (str): The complete output from the model.</span>
<span class="sd">    - delimiter (str): The delimiter used to separate reasoning steps in the model&#39;s output.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - str: The final response extracted from the model&#39;s output. In case of errors, returns a predefined error message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Split the model&#39;s output using the delimiter to separate reasoning steps</span>
        <span class="c1"># and select the last element as the final response.</span>
        <span class="n">final_response</span> <span class="o">=</span> <span class="n">model_output</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">final_response</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="c1"># Handle any potential errors gracefully and return a predefined error message.</span>
        <span class="k">return</span> <span class="s2">&quot;Sorry, I&#39;m unable to process the response at the moment. Please try again.&quot;</span>

<span class="c1"># Example usage</span>
<span class="n">model_output</span> <span class="o">=</span> <span class="s2">&quot;#### Step 1: Analyzing the query.#### Step 2: Gathering relevant information.#### Final response: The BlueWave Chromebook is more cost-effective than the TechPro Desktop.&quot;</span>
<span class="n">delimiter</span> <span class="o">=</span> <span class="s2">&quot;####&quot;</span>

<span class="n">final_response</span> <span class="o">=</span> <span class="n">get_final_response</span><span class="p">(</span><span class="n">model_output</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">final_response</span><span class="p">)</span>
</code></pre></div></p>
<p>3.
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_response_for_queries</span><span class="p">(</span><span class="n">query_prompts</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span> <span class="n">response_temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_response_tokens</span><span class="o">=</span><span class="mi">500</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mock function to simulate retrieving responses from the OpenAI API.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - query_prompts: A list containing the system and user prompts.</span>
<span class="sd">    - model_name: Specifies the model version to use (ignored in mock).</span>
<span class="sd">    - response_temperature: Controls the randomness of the model&#39;s responses (ignored in mock).</span>
<span class="sd">    - max_response_tokens: Limits the length of the model&#39;s response (ignored in mock).</span>

<span class="sd">    Returns:</span>
<span class="sd">    A simulated model&#39;s response to the user&#39;s query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Example responses for demonstration purposes</span>
    <span class="k">if</span> <span class="s2">&quot;compare to the TechPro Desktop&quot;</span> <span class="ow">in</span> <span class="n">query_prompts</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;content&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">&quot;#### Step 1: Analyzing the query.#### Step 2: Gathering relevant information.#### Final response: The BlueWave Chromebook is more cost-effective than the TechPro Desktop.&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Televisions are currently not available for sale. We expect to restock next month.&quot;</span>

<span class="c1"># Example queries for Chain of Thought Reasoning and Inner Monologue Technique</span>
<span class="n">chain_of_thought_query</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;system&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Your system prompt goes here.&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s2">&quot;How does the BlueWave Chromebook compare to the TechPro Desktop in terms of cost?&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">inner_monologue_query</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;system&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Your system prompt goes here.&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;role&#39;</span><span class="p">:</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s2">&quot;Are televisions available for sale?&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="c1"># Sending the queries and printing responses</span>
<span class="n">response_cot</span> <span class="o">=</span> <span class="n">get_response_for_queries</span><span class="p">(</span><span class="n">chain_of_thought_query</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Chain of Thought Response:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_cot</span><span class="p">)</span>

<span class="n">response_im</span> <span class="o">=</span> <span class="n">get_response_for_queries</span><span class="p">(</span><span class="n">inner_monologue_query</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Inner Monologue Response:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response_im</span><span class="p">)</span>
</code></pre></div></p>
<p>4.
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_response_structure</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validates if the response from the model correctly follows the structure defined by the Chain of Thought Reasoning steps.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - response (str): The model&#39;s response.</span>
<span class="sd">    - delimiter (str): The delimiter used to separate reasoning steps.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - bool: True if the response adheres to the expected structure, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">delimiter</span><span class="p">)</span>
    <span class="c1"># Assuming a valid response must have at least 3 parts: initial analysis, reasoning, and final response</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span>

<span class="c1"># Example usage</span>
<span class="n">response</span> <span class="o">=</span> <span class="s2">&quot;#### Step 1: Analyzing the query.#### Step 2: Gathering relevant information.#### Final response: The BlueWave Chromebook is more cost-effective than the TechPro Desktop.&quot;</span>
<span class="n">delimiter</span> <span class="o">=</span> <span class="s2">&quot;####&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">validate_response_structure</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">))</span>
</code></pre></div></p>
<p>5.
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="k">class</span><span class="w"> </span><span class="nc">QueryProcessor</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span> <span class="o">=</span> <span class="s2">&quot;####&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_api_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads the OpenAI API key from environment variables.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">load_dotenv</span><span class="p">()</span>  <span class="c1"># Load environment variables from a .env file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;OPENAI_API_KEY&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;API key is not set. Please check your environment variables.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">structure_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_query</span><span class="p">,</span> <span class="n">technique</span><span class="o">=</span><span class="s1">&#39;chain_of_thought&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Structures the prompt based on the specified technique.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">technique</span> <span class="o">==</span> <span class="s1">&#39;chain_of_thought&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chain_of_thought_prompt</span><span class="p">(</span><span class="n">user_query</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">technique</span> <span class="o">==</span> <span class="s1">&#39;inner_monologue&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inner_monologue_prompt</span><span class="p">(</span><span class="n">user_query</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported technique specified.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">send_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">system_prompt</span><span class="p">,</span> <span class="n">user_query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mocks sending a query to the OpenAI API and receiving a response.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Here you would use OpenAI().chat.completions.create(...) to send the query</span>
            <span class="c1"># For demonstration, we return a mock response</span>
            <span class="k">if</span> <span class="s2">&quot;compare&quot;</span> <span class="ow">in</span> <span class="n">user_query</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;#### Step 1: Analyzing the query.#### Step 2: Gathering relevant information.#### Final response: The BlueWave Chromebook is more cost-effective.&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;Televisions are currently not available for sale.&quot;</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Handle errors such as network failures or API limits</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to send query: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">technique</span><span class="o">=</span><span class="s1">&#39;chain_of_thought&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Processes the response based on the specified technique.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">technique</span> <span class="o">==</span> <span class="s1">&#39;chain_of_thought&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_response_structure</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">technique</span> <span class="o">==</span> <span class="s1">&#39;inner_monologue&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported technique specified.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_chain_of_thought_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Private method to structure a prompt for Chain of Thought Reasoning.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Define a system prompt for Chain of Thought Reasoning</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span><span class="si">}{</span><span class="n">user_query</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_inner_monologue_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Private method to structure a prompt for Inner Monologue Technique.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># For Inner Monologue, we might structure the prompt differently or use the same structure</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span><span class="si">}{</span><span class="n">user_query</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_response_structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validates if the response structure matches the expected format for Chain of Thought Reasoning.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">steps</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_delimiter</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span>

<span class="c1"># Example usage</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">QueryProcessor</span><span class="p">()</span>
<span class="n">processor</span><span class="o">.</span><span class="n">load_api_key</span><span class="p">()</span>  <span class="c1"># Load the API key</span>

<span class="c1"># Chain of Thought Reasoning example</span>
<span class="n">cot_prompt</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">structure_prompt</span><span class="p">(</span><span class="s2">&quot;How does the BlueWave Chromebook compare to the TechPro Desktop?&quot;</span><span class="p">,</span> <span class="n">technique</span><span class="o">=</span><span class="s1">&#39;chain_of_thought&#39;</span><span class="p">)</span>
<span class="n">cot_response</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">send_query</span><span class="p">(</span><span class="n">cot_prompt</span><span class="p">,</span> <span class="s2">&quot;How does the BlueWave Chromebook compare to the TechPro Desktop?&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Chain of Thought Response Validation:&quot;</span><span class="p">,</span> <span class="n">processor</span><span class="o">.</span><span class="n">process_response</span><span class="p">(</span><span class="n">cot_response</span><span class="p">,</span> <span class="n">technique</span><span class="o">=</span><span class="s1">&#39;chain_of_thought&#39;</span><span class="p">))</span>

<span class="c1"># Inner Monologue example</span>
<span class="n">im_prompt</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">structure_prompt</span><span class="p">(</span><span class="s2">&quot;Are televisions available for sale?&quot;</span><span class="p">,</span> <span class="n">technique</span><span class="o">=</span><span class="s1">&#39;inner_monologue&#39;</span><span class="p">)</span>
<span class="n">im_response</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">send_query</span><span class="p">(</span><span class="n">im_prompt</span><span class="p">,</span> <span class="s2">&quot;Are televisions available for sale?&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inner Monologue Final Response:&quot;</span><span class="p">,</span> <span class="n">processor</span><span class="o">.</span><span class="n">process_response</span><span class="p">(</span><span class="n">im_response</span><span class="p">,</span> <span class="n">technique</span><span class="o">=</span><span class="s1">&#39;inner_monologue&#39;</span><span class="p">))</span>
</code></pre></div></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>